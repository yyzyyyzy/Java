# 过滤器与拦截器的区别总结

## 一、应用层次不同

### 1. 过滤器（Filter）

- **作用范围**：作用于整个 Web 应用的请求和响应。
- **应用场景**：用于对请求和响应进行过滤和修改，常见于记录请求日志、压缩响应数据、设置字符编码、权限检查和安全验证等。

### 2. 拦截器（Interceptor）

- **作用范围**：作用于 Spring MVC 控制器层。
- **应用场景**：用于业务逻辑层的预处理和后处理，如用户身份认证、记录用户操作日志、事务管理、异常处理、数据绑定等。

## 二、生命周期和执行顺序

### 1. 过滤器的执行顺序

1. 请求到达容器。
2. 过滤器链执行。
3. 请求到达 Servlet。
4. Servlet 处理请求。
5. 响应返回给过滤器链。
6. 过滤器链执行。
7. 响应返回客户端。

### 2. 拦截器的执行顺序

1. 请求到达 `DispatcherServlet`。
2. 根据 `HandlerMapping` 找到处理器。
3. 拦截器的 `preHandle` 方法执行。
4. 处理器执行。
5. 拦截器的 `postHandle` 方法执行。
6. 生成视图。
7. 拦截器的 `afterCompletion` 方法执行。
8. 响应返回客户端。

## 三、配置方式

### 1. 过滤器的配置

- **配置位置**：`web.xml` 文件或通过注解配置。
- **常见配置**：指定 URL 模式以拦截特定的请求路径。

### 2. 拦截器的配置

- **配置位置**：Spring 配置文件或配置类中。
- **常见配置**：通过实现 `WebMvcConfigurer` 接口并重写 `addInterceptors` 方法进行注册，并指定路径模式以拦截特定的请求路径。

## 四、总结

- **作用范围**：过滤器作用于整个应用的请求和响应，拦截器作用于 Spring MVC 控制器层。
- **应用场景**：过滤器适合处理通用任务（如日志记录、编码设置），拦截器适合处理业务相关的预处理和后处理（如身份认证、日志记录）。
- **配置方式**：过滤器通过 `web.xml` 或注解配置，拦截器通过 Spring 配置类或 XML 配置。
- **生命周期**：过滤器在请求进入 Servlet 容器时执行，拦截器在请求到达控制器之前和之后执行。

通过理解这些区别，可以更好地选择使用过滤器还是拦截器来实现特定的功能。